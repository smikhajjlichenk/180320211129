const form=document.forms[0],messages=document.getElementById("messages"),userMessage=document.getElementById("user-message"),btnSubmit=document.getElementById("btn-submit");class FormSubmit{constructor(e,s,t,a){this.form=e,this.messages=s,this.userMessage=t,this.btnSubmit=a,this.userMessageVal,this.userName="Аноним",this.initial()}initial(){this.form.addEventListener("submit",e=>{e.preventDefault()}),this.userMessage.addEventListener("input",e=>{this.userMessageVal=e.target.value.trim()}),this.userMessage.addEventListener("keydown",e=>{"Enter"==e.code&&(e.ctrlKey||e.metaKey)&&this.submitHandler.call(this)}),this.btnSubmit.addEventListener("click",this.submitHandler.bind(this))}submitHandler(){this.userMessageVal&&(this.messages.insertAdjacentHTML("beforeend",this.templateMessage()),this.userMessage.value="",this.userMessageVal="")}templateMessage(){return`<article class="chat-messages__item">\n      <header class="chat-messages__header">\n        <h3 class="chat-messages__user-name">\n          ${this.userName}\n          <time datetime="2011-10-13" class="chat-messages__date">\n          ${currentDate()}\n          </time>\n        </h3>\n      </header>\n      <p class="chat-messages__message">\n        ${sanitize(this.userMessageVal)}\n      </p>\n    </article>`}}new FormSubmit(form,messages,userMessage,btnSubmit);const UNSAFE_CHARS_RE=/<|>\/|'|\u2028|\u2029/g,ESCAPED_CHARS={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"\\u0027","</":"<\\u002F","\u2028":"\\u2028","\u2029":"\\u2029"},escapeUnsafeChars=e=>ESCAPED_CHARS[e];function sanitize(e){return e.replace(UNSAFE_CHARS_RE,escapeUnsafeChars)}function currentDate(){return(new Date).toLocaleDateString("ru",{month:"long",day:"numeric",year:"numeric"}).slice(0,-3)}